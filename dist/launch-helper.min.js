!function(e){var t={};function n(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var s=class{constructor(e){this._element=document.getElementsByTagName("launch-helper")[0],this._config=e}get element(){return this._element}get src(){const e=this._element.getAttribute("src")||this._config&&this._config.src;return"/"===e[0]?e.slice(1):e}get method(){return this._element.getAttribute("method")||this._config&&this._config.method||"GET"}get xdApi(){return this._element.getAttribute("api")||this._config&&this._config.api}get staticResource(){return this._element.getAttribute("res")||this._config&&this._config.res||window.location.origin}appendIframe(){this._removeIframe();const e=document.createElement("iframe");e.setAttribute("id","studio"),e.setAttribute("width","100%"),e.setAttribute("height","100%"),this._element.appendChild(e)}_removeIframe(){const e=this._element.getElementsByTagName("iframe");for(const t of e)this._element.removeChild(t)}};var o=class{constructor(e,t){this.ica=e,this.handlers=t}createSession(){const e=window.citrix;try{e.receiver.setPath(`${(new s).staticResource}/external/HTML5Client`),e.receiver.createSession(null,this._sessionParams,this._sessionCreated.bind(this))}catch(e){console.error(e)}}get _sessionParams(){return{launchType:"embed",closeOptions:{showDisconnectAlert:!1},container:{type:"iframe",id:"studio"},preferences:{ui:{toolbar:{fileTransfer:!1,about:!1,lock:!1,disconnect:!1,logoff:!0,fullscreen:!1,multitouch:!1,switchApp:!1,preferences:!1},appSwitcher:{showTaskbar:!1}}}}}_sessionCreated(e){this._sessionCreatedConfig(e),this._startSession(e)}_startSession(e){const t={type:"json",value:"string"==typeof this.ica?JSON.parse(this.ica):this.ica};e.start(t)}_sessionCreatedConfig(e){e.addListener("onConnection",this.handlers&&this.handlers.connectionHandler||function(e){console.log("Event Received : "+e.type),console.log(e.data)}),e.addListener("onConnectionClosed",this.handlers&&this.handlers.connectionClosedHandler||function(e){console.log("Event Received : "+e.type),console.log(e.data)}),e.addListener("onError",this.handlers&&this.handlers.onErrorHandler||function(e){console.log("Event Received : "+e.type),console.log(e.data)}),e.addListener("onURLRedirection",this.handlers&&this.handlers.onURLRedirectionHandler||function(e){console.log("Event Received : "+e.type),console.log(e.data)})}};var r=new class{get user(){return{customer:window.cwcCustomerId||this._customer||"studiopool",token:window.cwcBearerToken||this._bearerToken}}get _bearerToken(){}get _customer(){}};var i=class{constructor(){this._element=new s}get url(){return`${this._xenDesktopApi}/${this._element.src}`}get _xenDesktopApi(){return this._element.xdApi.replace("[customer]",r.user.customer)}};var c=class{get icaAsync(){return this._fetchIcaJson().then(e=>e)}async _fetchIcaJson(){const e=(new s).method,t={method:e,headers:{Authorization:`CWSAuth bearer=${r.user.token}`,"content-type":"application/json"}};"post"===e.toLowerCase()&&(t.body=JSON.stringify({SessionId:window.cwcSessionId}));const n=await fetch(i.url,t);return await n.json()}};var a=class{constructor(e,t){this._url=e,this._callback=t}loadScript(){const e=document.createElement("script");e.type="text/javascript",e.src=this._url,e.onreadystatechange=this._callback,e.onload=this._callback,document.body.appendChild(e)}};window.launchHelper=function(e,t){const n=new s(t),r=new Promise(e=>{new a(`${n.staticResource}/CitrixHTML5SDK.js`,()=>{e()}).loadScript()}),i=(new c).icaAsync;Promise.all([r,i]).then(t=>{const s=t[1];n.appendIframe(),new o(s,e).createSession()}).catch(e=>{console.log(e)})}}]);
//# sourceMappingURL=launch-helper.min.js.map